(define-foreign (log ()) (s str))
(define-foreign (logi ()) (n i32))

(struct Point
	(x i32)
	(y i32))

(struct Point3D
	(xy Point)
	(z i32))

(define (log-point ()) (p Point)
	(log "Logging point.")
	(logi (field p x))
	(logi (field p y)))

(define (log-point3d ()) (p Point3D)
	(log-point (field p xy))
	(log "Logging point3d.")
	(logi (field p z)))

(define (set-point-x ()) (p (* Point) n i32)
	(write-i32 (addr (field (* p) x)) n))

(define (main i32) ()
	(begin
		(let p (Point3D (Point 3 2) 7))
		(log-point3d p)
		0))
